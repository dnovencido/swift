<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>SWIFT 2.0 - Daily Report</title>
    <link rel="icon" type="image/png" href="../img/SWIFT-LOGO-MONOGRAM.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
    <link rel="stylesheet" href="../css/style.css?v=1759866206" />
</head>
<body>
    <div class="sidebar">
        <div>
            <div class="logo">
                <img src="../img/SWIFT-LOGO-TITLE.png" alt="SWIFT" style="height: 120px; width: auto;">
            </div>
            <div class="nav-menu">
                <a href="index.html" class="nav-item"><i class="fas fa-home"></i><span>Dashboard</span></a>
                <a href="dailyreport.html" class="nav-item active"><i class="fa-solid fa-clipboard"></i><span>Daily Report</span></a>
                <a href="weeklyreport.html" class="nav-item"><i class="fa-solid fa-calendar-week"></i><span>Weekly Report</span></a>
            </div>
        </div>
        <div style="margin-top: auto; padding-top: 20px;">
            <div class="nav-menu">
                <a href="#" class="nav-item" id="logoutBtn"><i class="fa-solid fa-right-from-bracket"></i><span>Logout</span></a>
            </div>
        </div>
    </div>
    <div class="main-content">
        <div class="header">
            <div class="welcome-section">
                <p class="greeting" id="greeting">&nbsp;</p>
                <h1 class="welcome-title">DAILY REPORTS</h1>
            </div>
            <div class="header-controls" style="display: flex; align-items: center; gap: 16px;">
                <div class="control-group" style="display: flex; align-items: center; gap: 8px;">
                    <label for="reportDate" id="dateLabel" style="font-size: 14px; color: var(--text-secondary); font-weight: 500;">Date:</label>
                    <input type="date" id="reportDate" value="" style="padding: 8px 12px; border: 1px solid var(--gray-300); border-radius: var(--border-radius); background: var(--white); color: var(--text-primary);">
                </div>
                <button id="exportReport" class="control-btn" style="background: var(--primary-color);">Export PDF</button>
            </div>
        </div>
        <div class="report-container">
            <div class="control-card">
                <h2 class="section-title">Report</h2>
                <div class="report-content">
                    <div id="reportData">
                        <p>Select a date to view the daily report.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', ()=>{
            try{ const u = JSON.parse(localStorage.getItem('swift_user')||'null'); if(!u){ window.location.href = '../login.html'; return; } }catch(e){ window.location.href='../login.html'; return; }
        });
        
        // Modal System Functions
        function showModal(title, message, type = 'info', showCancel = false) {
            return new Promise((resolve) => {
                const modal = document.getElementById('modalOverlay');
                const modalTitle = document.getElementById('modalTitle');
                const modalMessage = document.getElementById('modalMessage');
                const modalIcon = document.getElementById('modalIcon');
                const modalConfirm = document.getElementById('modalConfirm');
                const modalCancel = document.getElementById('modalCancel');
                const modalClose = document.getElementById('modalClose');

                // Set content
                modalTitle.textContent = title;
                modalMessage.textContent = message;

                // Set icon based on type
                const iconMap = {
                    'info': 'fas fa-info-circle',
                    'success': 'fas fa-check-circle',
                    'error': 'fas fa-exclamation-triangle',
                    'warning': 'fas fa-exclamation-circle',
                    'confirm': 'fas fa-question-circle',
                    'delete': 'fas fa-trash-alt'
                };
                modalIcon.className = iconMap[type] || iconMap['info'];

                // Set icon color based on type
                const colorMap = {
                    'info': '#1877f2',
                    'success': '#42b883',
                    'error': '#f02849',
                    'warning': '#f7b928',
                    'confirm': '#17a2b8',
                    'delete': '#f02849'
                };
                modalIcon.style.color = colorMap[type] || colorMap['info'];

                // Show/hide cancel button
                modalCancel.style.display = showCancel ? 'inline-block' : 'none';

                // Set button text based on type
                if (type === 'success') {
                    modalConfirm.textContent = 'OK';
                    modalConfirm.className = 'modal-btn modal-btn-primary';
                } else if (type === 'error') {
                    modalConfirm.textContent = 'OK';
                    modalConfirm.className = 'modal-btn modal-btn-primary';
                } else if (type === 'confirm') {
                    modalConfirm.textContent = 'Confirm';
                    modalConfirm.className = 'modal-btn modal-btn-primary';
                    modalCancel.textContent = 'Cancel';
                } else if (type === 'delete') {
                    modalConfirm.textContent = 'Delete';
                    modalConfirm.className = 'modal-btn modal-btn-danger';
                    modalCancel.textContent = 'Cancel';
                } else {
                    modalConfirm.textContent = 'OK';
                    modalConfirm.className = 'modal-btn modal-btn-primary';
                }

                // Show modal
                modal.style.display = 'flex';

                // Event handlers
                const handleConfirm = () => {
                    cleanup();
                    resolve(true);
                };

                const handleCancel = () => {
                    cleanup();
                    resolve(false);
                };

                const handleClose = () => {
                    cleanup();
                    resolve(false);
                };

                const cleanup = () => {
                    modal.style.display = 'none';
                    modalConfirm.removeEventListener('click', handleConfirm);
                    modalCancel.removeEventListener('click', handleCancel);
                    modalClose.removeEventListener('click', handleClose);
                    modal.removeEventListener('click', handleOverlayClick);
                };

                const handleOverlayClick = (e) => {
                    if (e.target === modal) {
                        handleClose();
                    }
                };

                // Add event listeners
                modalConfirm.addEventListener('click', handleConfirm);
                modalCancel.addEventListener('click', handleCancel);
                modalClose.addEventListener('click', handleClose);
                modal.addEventListener('click', handleOverlayClick);

                // Focus on confirm button
                setTimeout(() => modalConfirm.focus(), 100);
            });
        }

        // Replace alert function
        window.alert = (message) => showModal('Alert', message, 'info');

        // Replace confirm function
        window.confirm = (message) => showModal('Confirm', message, 'confirm', true);
    </script>
    
    <!-- Modal System -->
    <div id="modalOverlay" class="modal-overlay" style="display: none;">
        <div class="modal-container">
            <div class="modal-header">
                <div class="modal-title-section">
                    <i id="modalIcon" class="fas fa-info-circle"></i>
                    <h3 id="modalTitle">Alert</h3>
                </div>
                <button id="modalClose" class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p id="modalMessage">Message</p>
            </div>
            <div class="modal-footer">
                <button id="modalConfirm" class="modal-btn modal-btn-primary">OK</button>
                <button id="modalCancel" class="modal-btn modal-btn-secondary" style="display: none;">Cancel</button>
            </div>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="../js/config.js"></script>
    <script src="../js/dailyreport.js"></script>
</body>
</html>

